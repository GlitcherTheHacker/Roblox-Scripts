-- ⚡ TOOL GRABBER (Standalone) ⚡

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Tycoons = workspace:WaitForChild("Tycoons")

-- === CONFIG ===
local hitPerFrame = 3 -- how many touches per frame per pad
local allowedBases  = { "Stone", "Magic", "Storm" }
local excludedBases = { "Insanity", "Giant", "Dark", "Spike", "Web", "Strong" }

-- Lookup sets
local allowedSet, excludedSet = {}, {}
for _, b in ipairs(allowedBases) do allowedSet[b] = true end
for _, b in ipairs(excludedBases) do excludedSet[b] = true end

-- Pad cache
local pads = {}

-- Registering pads
local function registerPad(pad)
    local baseModel = pad.Parent and pad.Parent.Parent
    if not baseModel then return end
    local baseName = baseModel.Name
    if baseName and (allowedSet[baseName] or not excludedSet[baseName]) then
        pads[pad] = true
    end
end

local function unregisterPad(pad)
    pads[pad] = nil
end

-- Initialize existing pads
for _, v in ipairs(Tycoons:GetDescendants()) do
    if v:IsA("TouchTransmitter") and v.Parent and v.Parent.Parent and v.Parent.Parent.Name:find("GearGiver1") then
        registerPad(v.Parent)
    end
end

-- Watch for new/removed pads
Tycoons.DescendantAdded:Connect(function(desc)
    if desc:IsA("TouchTransmitter") and desc.Parent and desc.Parent.Parent and desc.Parent.Parent.Name:find("GearGiver1") then
        registerPad(desc.Parent)
    end
end)

Tycoons.DescendantRemoving:Connect(function(desc)
    if desc:IsA("TouchTransmitter") then
        unregisterPad(desc.Parent)
    end
end)

-- Touch helper
local function fireTouch(root, pad)
    pcall(function()
        firetouchinterest(root, pad, 0)
        firetouchinterest(root, pad, 1)
    end)
end

-- Grab tools
local function grabAllTools()
    local char = LocalPlayer.Character
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return end

    for pad in pairs(pads) do
        for i = 1, hitPerFrame do
            fireTouch(root, pad)
        end
    end
end

-- Grab instantly when spawning
LocalPlayer.CharacterAdded:Connect(function(char)
    task.defer(grabAllTools)
end)

-- Keep grabbing every frame
RunService.Heartbeat:Connect(grabAllTools)

print("⚡ TOOL GRABBER Loaded ⚡")
