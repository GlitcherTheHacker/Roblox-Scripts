-- ⚡ ULTRA-INSTANT TOOL GRABBER v11 ⚡
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Tycoons = workspace:WaitForChild("Tycoons")

local hitPerFrame = 3 -- slight bump for reliability

local allowedBases = { "Stone", "Magic", "Storm" }
local excludedBases = { "Insanity", "Giant", "Dark", "Spike", "Web", "Strong" }

local allowedSet, excludedSet = {}, {}
for _, b in ipairs(allowedBases) do allowedSet[b] = true end
for _, b in ipairs(excludedBases) do excludedSet[b] = true end

local pads = {}

local function fireTouch(root, pad)
	firetouchinterest(root, pad, 0)
	firetouchinterest(root, pad, 1)
end

local function getRoot()
	local char = LocalPlayer.Character
	return char and char:FindFirstChild("HumanoidRootPart")
end

local function registerPad(pad)
	local baseModel = pad.Parent and pad.Parent.Parent
	if not baseModel then return end
	local baseName = baseModel.Name
	if baseName and (allowedSet[baseName] or not excludedSet[baseName]) then
		pads[pad] = true
	end
end

local function unregisterPad(pad)
	pads[pad] = nil
end

for _, v in ipairs(Tycoons:GetDescendants()) do
	if v:IsA("TouchTransmitter") and v.Parent and v.Parent.Parent and v.Parent.Parent.Name:find("GearGiver1") then
		registerPad(v.Parent)
	end
end

Tycoons.DescendantAdded:Connect(function(desc)
	if desc:IsA("TouchTransmitter") and desc.Parent and desc.Parent.Parent and desc.Parent.Parent.Name:find("GearGiver1") then
		registerPad(desc.Parent)
	end
end)
Tycoons.DescendantRemoving:Connect(function(desc)
	if desc:IsA("TouchTransmitter") then
		unregisterPad(desc.Parent)
	end
end)

RunService.Heartbeat:Connect(function()
	local root = getRoot()
	if not root then return end
	for pad in pairs(pads) do
		for i = 1, hitPerFrame do
			fireTouch(root, pad)
		end
	end
end)

print("⚡ Tool Grabber v11 loaded (fastest cached) ⚡")
