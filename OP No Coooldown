-- âš¡ NO COOLDOWN âš¡
-- (Absolute maximum throughput. No limits. No mercy.)

local RS = game:GetService("RunService")

-----------------------------------------
-- ðŸ”¥ YIELD OVERRIDES (TOTAL HOOK TAKEOVER)
-----------------------------------------
local fastYield = function()
    return RS.Heartbeat:Wait()
end

hookfunction(wait, fastYield)
hookfunction(task.wait, fastYield)
hookfunction(delay, function(_, f) task.defer(f) end)
hookfunction(spawn, function(f) task.defer(f) end)
hookfunction(coroutine.yield, fastYield)

-- Force ANY custom waits to run instantly
debug.setmemorycategory("NO-COOLDOWN")
task.spawn(function()
	while true do
		debug.profilebegin("yield-stripper")
		task.desynchronize()      -- isolates timing from Roblox throttle
		debug.profileend()
		RS.Stepped:Wait()
	end
end)

-----------------------------------------
-- ðŸš€ CONFIGURATION â€” PUSHED TO THE MAX
-----------------------------------------
local SUBTICKS = 20            -- was 5 â†’ now 4x faster
local SUPERBURST = 8           -- parallel bursts per tick
local SOFT_RECOVER = 0.0005    -- smallest stable micro-yield
local RESET_CYCLE = 1200       -- prevents lock, higher = faster

-----------------------------------------
-- âš¡ CORE LOOP â€” MULTI-LAYER QUANTUM TICKER
-----------------------------------------
task.spawn(function()
	local n = 0
	while true do
		n += 1

		-- Main burst: executes multiple subframe waits per frame
		for _ = 1, SUBTICKS do
			RS.PreAnimation:Wait()
			RS.PreSimulation:Wait()
			RS.Heartbeat:Wait()
			RS.PostSimulation:Wait()
		end

		-- Hard overdrive parallelization
		for _ = 1, SUPERBURST do
			task.defer(function()
				RS.Heartbeat:Wait()
				RS.Stepped:Wait()
				RS.PostSimulation:Wait()
			end)
		end

		-- Minimal â€œanti-freezeâ€ pulse
		if n >= RESET_CYCLE then
			n = 0
			task.wait(SOFT_RECOVER)
		end
	end
end)

-----------------------------------------
-- âš¡ PARALLEL THREAD INJECTOR
-- (Fills all unused scheduler gaps)
-----------------------------------------
task.spawn(function()
	while true do
		task.desynchronize() -- frees from context overhead
		task.defer(function() RS.PreSimulation:Wait() end)
		task.defer(function() RS.Heartbeat:Wait() end)
		task.defer(function() RS.PostSimulation:Wait() end)
		task.defer(function() RS.Stepped:Wait() end)
	end
end)

-----------------------------------------
-- ðŸ”¥ BACKUP TURBO-LOOP
-- (This one runs even if the main system stalls)
-----------------------------------------
task.spawn(function()
	while true do
		pcall(function()
			RS.Heartbeat:Wait()
			RS.PreAnimation:Wait()
			RS.PreSimulation:Wait()
			RS.PostSimulation:Wait()
		end)
	end
end)

-----------------------------------------
-- ðŸ›¡ï¸ SCHEDULER RESCUE WATCHDOG
-- (Revives timing if Roblox throttles yields)
-----------------------------------------
task.spawn(function()
	while true do
		local ok = pcall(function()
			RS.Stepped:Wait()
		end)
		if not ok then
			warn("âš ï¸ Scheduler choke detected â€” rebooting quantum pipeline...")
			task.wait(0.001)
		end
	end
end)

-----------------------------------------
-- ðŸ§  LOAD TESTER (OPTIONAL)
-----------------------------------------
task.spawn(function()
	local c, t = 0, os.clock()
	while true do
		c += 1
		if os.clock() - t >= 1 then
			--warn("âš¡ Subframe throughput:", c * SUBTICKS * SUPERBURST)
			c, t = 0, os.clock()
		end
		RS.PostSimulation:Wait()
	end
end)

print("ðŸ”¥ NO COOLDOWN Initilized")
