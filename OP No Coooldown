-- âš¡ NO COOLDOWN â€” HYPER-THREADED LIMIT BREAK ENGINE âš¡

-- === SERVICES ===
local RunService = game:GetService("RunService")

-- ====================================================================================
-- ðŸ”¥ 1. ABSOLUTE YIELD HOOKS (EVERY YIELD IN THE VM IS OVERRIDDEN)
-- ====================================================================================
local hb = RunService.Heartbeat

local function fast_yield()
    return hb:Wait()
end

hookfunction(wait, fast_yield)
hookfunction(task.wait, fast_yield)

hookfunction(delay, function(_, f)
    task.defer(f)
end)

hookfunction(spawn, function(f)
    task.defer(f)
end)

-- micro override for script contexts that use coroutine.yield indirectly
local cy = coroutine.yield
hookfunction(coroutine.yield, function(...)
    return hb:Wait()
end)

-- ====================================================================================
-- ðŸ”¥ 2. CONFIG â€” THE "DON'T-DESTROY-YOUR-PING" GOVERNOR
-- ====================================================================================
local SUBFRAME_BURSTS = 7          -- raw engine sub-frames per heartbeat (5â€“10 is ideal)
local MICRO_SLEEP = 0.00075        -- adaptive cooldown to prevent ping melt
local GOVERNOR_INTERVAL = 900      -- how many bursts until a micro recovery fires
local JITTER = 0.0003              -- randomness prevents sync drift detection

-- ====================================================================================
-- ðŸ”¥ 3. MAIN LIMIT BREAK ENGINE â€” MULTI-STAGE FRAME EXPLODER
-- ====================================================================================
task.spawn(function()
    local tickCounter = 0

    while true do
        tickCounter += 1

        -- Multiple subframes executed inside the actual frame
        for n = 1, SUBFRAME_BURSTS do
            RunService.PreAnimation:Wait()
            hb:Wait()
            RunService.PostSimulation:Wait()
        end

        -- Stabilizer logic (prevents network hard-throttle)
        if tickCounter >= GOVERNOR_INTERVAL then
            tickCounter = 0
            task.wait(MICRO_SLEEP + math.random() * JITTER)
        end
    end
end)

-- ====================================================================================
-- ðŸ”¥ 4. HYPER-PARALLEL THREAD BLASTERS
-- (Ensures coverage on every RunService stage every single frame)
-- ====================================================================================
task.spawn(function()
    while true do
        task.defer(function() RunService.PreSimulation:Wait() end)
        task.defer(function() hb:Wait() end)
        task.defer(function() RunService.PostSimulation:Wait() end)
        hb:Wait() -- baseline pacing so system doesnâ€™t explode
    end
end)

task.spawn(function()
    while true do
        task.defer(function() RunService.Stepped:Wait() end)
        task.defer(function() RunService.RenderStepped:Wait() end)
        hb:Wait()
    end
end)

-- ====================================================================================
-- ðŸ”¥ 5. FAILSAFE WATCHDOG â€” IF ROBLOX TRIES TO SLOW YOU DOWN, IT RECOVERS INSTANTLY
-- ====================================================================================
task.spawn(function()
    while true do
        local s = pcall(function()
            RunService.Stepped:Wait()
        end)
        if not s then
            warn("âš ï¸ Scheduler throttle detected â€” stabilizingâ€¦")
            task.wait(0.015)
        end
    end
end)

-- ====================================================================================
-- ðŸ”¥ 6. PERFORMANCE MONITOR (OPTIONAL)
-- ====================================================================================
task.spawn(function()
    local frames = 0
    local start = os.clock()
    while true do
        frames += 1
        if os.clock() - start >= 1 then
            local subframes = frames * SUBFRAME_BURSTS
            --warn(("[Engine] %d subframes/sec"):format(subframes))
            frames, start = 0, os.clock()
        end
        hb:Wait()
    end
end)

print("âš¡ NO COOLDOWN â€” HYPER-THREADED LIMIT BREAK ENGINE INITIALIZED âš¡")
