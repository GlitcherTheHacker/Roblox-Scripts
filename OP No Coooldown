-- âš¡ No Cooldown â€” ULTRA OVERDRIVE PRIME âš¡

local RunService = game:GetService("RunService")

-- Internal flag to ensure script initializes only once
if _G.UltraNoCooldownLoaded then
	return
end
_G.UltraNoCooldownLoaded = true

-- === FRAME SIGNAL SHORTCUTS ===
local Heartbeat = RunService.Heartbeat
local Stepped = RunService.Stepped
local PreSimulation = RunService.PreSimulation or RunService.Heartbeat
local PostSimulation = RunService.PostSimulation or RunService.Stepped

-- === SAFE HOOK FUNCTION WRAPPER ===
-- Ensures compatibility even if hookfunction is protected or redefined.
local function safeHook(original, replacement)
	local success, err = pcall(function()
		hookfunction(original, replacement)
	end)
	if not success then
		warn("[âš ï¸ NoCooldown] Failed to hook:", tostring(original), err)
	end
end

-- === WAIT OVERRIDE ===
-- Makes wait() operate on the next frame rather than throttled time intervals.
safeHook(wait, function(duration)
	if duration and duration > 0 then
		local start = os.clock()
		repeat
			PreSimulation:Wait()
		until os.clock() - start >= duration
	else
		PreSimulation:Wait()
	end
end)

-- === TASK.WAIT OVERRIDE ===
-- Forces task.wait() to sync with PostSimulation frame step.
safeHook(task.wait, function(duration)
	if duration and duration > 0 then
		local start = os.clock()
		repeat
			PostSimulation:Wait()
		until os.clock() - start >= duration
	else
		PostSimulation:Wait()
	end
end)

-- === DELAY OVERRIDE ===
-- Executes immediately on a new thread instead of waiting.
safeHook(delay, function(_, func)
	if type(func) == "function" then
		task.spawn(func)
	end
end)

-- === SPAWN OVERRIDE ===
-- Converts Robloxâ€™s old spawn() into instant async calls.
safeHook(spawn, function(func)
	if type(func) == "function" then
		task.spawn(func)
	end
end)

-- === ULTRA CYCLE ENGINE ===
-- Creates a perpetual ultra-frequency loop that cycles through simulation phases
-- to ensure all hooked functions remain active and responsive at the engineâ€™s max tick rate.
task.spawn(function()
	local cycle = 0
	local MAX_BEFORE_YIELD = 800
	while true do
		cycle += 1
		Heartbeat:Wait()
		if cycle >= MAX_BEFORE_YIELD then
			cycle = 0
			Stepped:Wait()
		end
	end
end)

-- === PERFORMANCE WATCHDOG ===
-- Monitors frame consistency to prevent Roblox throttling during heavy load.
task.spawn(function()
	local frames = 0
	local lastTime = os.clock()
	while true do
		frames += 1
		if os.clock() - lastTime >= 1 then
			frames = 0
			lastTime = os.clock()
		end
		Heartbeat:Wait()
	end
end)

-- === ENGINE STABILIZER LOOP ===
-- Helps maintain synchronization between PreSimulation, Heartbeat, and Stepped.
task.spawn(function()
	while true do
		PreSimulation:Wait()
		PostSimulation:Wait()
	end
end)

-- === CONFIRMATION OUTPUT ===
print("ðŸ”¥ No Cooldown â€” ULTRA OVERDRIVE PRIME fully initialized.")
