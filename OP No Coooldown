-- âš¡ NO COOLDOWN â€” STABILIZED MODE âš¡

local RunService = game:GetService("RunService")

-- === YIELD OVERRIDES (ULTRA-LIGHT REPLACEMENTS) ===
hookfunction(wait, function()
	return RunService.Heartbeat:Wait()
end)
hookfunction(task.wait, function()
	return RunService.Heartbeat:Wait()
end)
hookfunction(delay, function(_, func)
	task.defer(func)
end)
hookfunction(spawn, function(func)
	task.defer(func)
end)

-- === CONFIGURATION ===
local FRAME_BURST = 5           -- how many subframe ticks per engine frame (higher = faster)
local STABILIZE_INTERVAL = 600  -- how often to micro-yield (prevents freeze)
local SOFT_YIELD = 0.001        -- micro-sleep duration during yield cycle

-- === CORE ENGINE LOOP (MULTI-PHASE) ===
task.spawn(function()
	local frameCounter = 0
	while true do
		frameCounter += 1

		-- Execute multiple subframe bursts per engine heartbeat
		for i = 1, FRAME_BURST do
			RunService.PreAnimation:Wait()
			RunService.Heartbeat:Wait()
			RunService.PostSimulation:Wait()
		end

		-- Adaptive soft-yield â€” prevents deadlock & network flood
		if frameCounter >= STABILIZE_INTERVAL then
			frameCounter = 0
			task.wait(SOFT_YIELD)
		end
	end
end)

-- === ASYNC OVERDRIVE THREADS (PARALLEL EXECUTION) ===
-- Microthreading for constant multi-phase coverage.
task.spawn(function()
	while true do
		task.defer(function() RunService.PreSimulation:Wait() end)
		task.defer(function() RunService.Heartbeat:Wait() end)
		task.defer(function() RunService.PostSimulation:Wait() end)
		RunService.Heartbeat:Wait() -- minor pacing to prevent overload
	end
end)

-- === AUTO-RECOVERY WATCHDOG ===
-- Ensures the loop recovers if Roblox internally throttles yields or scheduler stalls.
task.spawn(function()
	while true do
		local s, err = pcall(function()
			RunService.Stepped:Wait()
		end)
		if not s then
			warn("âš ï¸ Engine desync detected, auto-stabilizing...")
			task.wait(0.02)
		end
	end
end)

-- === OPTIONAL DEBUG MONITOR ===
task.spawn(function()
	local frames, stamp = 0, os.clock()
	while true do
		frames += 1
		if os.clock() - stamp >= 1 then
			local fps = frames
			frames, stamp = 0, os.clock()
			--warn(string.format("ðŸ§  Engine Cycles: %d subframes/sec", fps * FRAME_BURST))
		end
		RunService.PostSimulation:Wait()
	end
end)

print("âœ… NO COOLDOWN â€” STABILIZED MODE INITILIZED.")
