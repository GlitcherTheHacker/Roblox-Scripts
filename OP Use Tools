-- ⚡ USE TOOLS vX — Engine-Synced Overdrive Edition ⚡
-- Uses frame-locked execution and microthread activation to match No Cooldown’s peak rate

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local player = Players.LocalPlayer
local heartbeat = RunService.Heartbeat
local postSim = RunService.PostSimulation

-- === GUI SETUP ===
local gui = Instance.new("ScreenGui")
gui.Name = "UltraUseTools"
gui.ResetOnSpawn = false
gui.Parent = game:GetService("CoreGui")

local toggle = Instance.new("TextButton")
toggle.Size = UDim2.new(0, 120, 0, 50)
toggle.Position = UDim2.new(0.95, -120, 0.5, -25) -- Middle-right placement
toggle.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
toggle.Font = Enum.Font.GothamBlack
toggle.Text = "OFF"
toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
toggle.TextSize = 22
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0.3, 0)

-- === STATE ===
local active = false
local function updateButton()
	toggle.Text = active and "ON" or "OFF"
	toggle.BackgroundColor3 = active and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(0, 0, 0)
	toggle.TextColor3 = active and Color3.fromRGB(0, 0, 0) or Color3.fromRGB(255, 255, 255)
end

-- === TOGGLE FUNCTIONALITY ===
local function toggleState()
	active = not active
	updateButton()
end

toggle.MouseButton1Click:Connect(toggleState)
UIS.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == Enum.KeyCode.Q then
		toggleState()
	end
end)

-- === TOOL ACTIVATION LOOP ===
task.spawn(function()
	while true do
		if active then
			local char = player.Character
			if char then
				local backpack = player:FindFirstChild("Backpack")
				if backpack then
					for _, tool in ipairs(backpack:GetChildren()) do
						if tool:IsA("Tool") then
							tool.Parent = char
						end
					end
				end

				-- Micro-threaded activation for zero-delay response
				for _, tool in ipairs(char:GetChildren()) do
					if tool:IsA("Tool") then
						task.spawn(function()
							pcall(function()
								tool:Activate()
							end)
						end)
					end
				end
			end
		end

		-- Sub-frame timing: executes between render and physics steps
		postSim:Wait()
	end
end)

-- === CHARACTER RESET HANDLER ===
player.CharacterAdded:Connect(function()
	task.wait(1)
	active = false
	updateButton()
end)

print("⚙️ Use Tools vX (Engine Overdrive) initialized at max runtime speed.")
