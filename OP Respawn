-- ⚡ ULTRA-INSTANT RESPAWN v13 ⚡
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local function forceRespawn()
	if LocalPlayer:FindFirstChild("LoadCharacter") then
		LocalPlayer:LoadCharacter()
	elseif ReplicatedStorage:FindFirstChild("Guide") then
		ReplicatedStorage.Guide:FireServer()
	end
end

local function hookCharacter(char)
	local humanoid = char:WaitForChild("Humanoid", 1)

	-- Primary: humanoid.Died
	humanoid.Died:Connect(forceRespawn)

	-- Backup: frame-perfect heartbeat
	local hbConn
	hbConn = RunService.Heartbeat:Connect(function()
		if humanoid.Health <= 0 then
			hbConn:Disconnect()
			forceRespawn()
		end
	end)

	-- Fallback: if Humanoid removed
	char.ChildRemoved:Connect(function(c)
		if c == humanoid then
			if hbConn then hbConn:Disconnect() end
			forceRespawn()
		end
	end)
end

LocalPlayer.CharacterAdded:Connect(hookCharacter)
if LocalPlayer.Character then
	hookCharacter(LocalPlayer.Character)
else
	forceRespawn()
end

print("⚡ Respawn v13 loaded (instant, frame-safe) ⚡")
