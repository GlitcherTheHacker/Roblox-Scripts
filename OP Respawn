-- ⚡ INSTANT RESPAWN (Standalone) ⚡

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Respawn remote
local Guide = ReplicatedStorage:WaitForChild("Guide")

-- Respawn once
local function forceRespawnOnce()
    pcall(function()
        Guide:FireServer()
    end)
end

-- Hook character lifecycle
local function hookCharacter(char)
    local humanoid = char:WaitForChild("Humanoid", 2)
    if not humanoid then return end

    local didRespawn = false

    local function tryRespawn()
        if not didRespawn then
            didRespawn = true
            forceRespawnOnce()
        end
    end

    -- Death signal
    humanoid.Died:Connect(tryRespawn)

    -- Safety net: health monitor
    RunService.Stepped:Connect(function()
        if humanoid and humanoid.Health <= 0 then
            tryRespawn()
        end
    end)

    -- If humanoid is deleted
    char.ChildRemoved:Connect(function(child)
        if child == humanoid then
            tryRespawn()
        end
    end)
end

-- Reset hook each time we spawn
LocalPlayer.CharacterAdded:Connect(hookCharacter)
if LocalPlayer.Character then
    hookCharacter(LocalPlayer.Character)
end

print("⚡ INSTANT RESPAWN Loaded ⚡")
