-- ⚡ ULTRA-INSTANT RESPAWN FINAL FORM ⚡
-- Fires "Guide" remote the very frame you die. Respawn is instant, no spam.

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Grab Guide remote
local Guide = ReplicatedStorage:WaitForChild("Guide")

-- Core respawn function
local function forceRespawn()
    pcall(function()
        Guide:FireServer()
    end)
end

-- Hook into character lifecycle
local function hookCharacter(char)
    local humanoid = char:WaitForChild("Humanoid", 2)
    if not humanoid then return end

    -- Fire instantly on Died
    humanoid.Died:Connect(function()
        forceRespawn()
    end)

    -- Extra safety: if Humanoid vanishes mid-death, trigger anyway
    char.ChildRemoved:Connect(function(child)
        if child == humanoid then
            forceRespawn()
        end
    end)

    -- Frame-perfect check: monitor health every Stepped
    RunService.Stepped:Connect(function()
        if humanoid and humanoid.Health <= 0 then
            forceRespawn()
        end
    end)
end

-- Connect hooks
LocalPlayer.CharacterAdded:Connect(hookCharacter)
if LocalPlayer.Character then
    hookCharacter(LocalPlayer.Character)
end

print("⚡ Ultra-Instant Respawn Final Form Loaded ⚡")
